(window.webpackJsonp=window.webpackJsonp||[]).push([[171],{1252:function(s,n,e){"use strict";e.r(n);var a=e(1),t=Object(a.a)({},(function(){var s=this,n=s.$createElement,e=s._self._c||n;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("p",[s._v("我们欢迎你贡献代码！这里是一份相关指南。")]),s._v(" "),e("h2",{attrs:{id:"克隆并安装项目"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#克隆并安装项目"}},[s._v("#")]),s._v(" 克隆并安装项目")]),s._v(" "),e("p",[s._v("使用 Git 克隆项目到本地，并使用 "),e("code",[s._v("yarn")]),s._v(" 进行依赖的安装。")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" clone git@github.com:vuepress-theme-hope/vuepress-theme-hope.git\n\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("yarn")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[s._v("提示")]),s._v(" "),e("p",[s._v("如果你并未安装 yarn，请使用 "),e("code",[s._v("npm i -g yarn")]),s._v(" 安装它。")])]),s._v(" "),e("h2",{attrs:{id:"项目文件结构"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#项目文件结构"}},[s._v("#")]),s._v(" 项目文件结构")]),s._v(" "),e("p",[s._v("本项目是一个 monorepo，使用 "),e("code",[s._v("lerna")]),s._v(" 管理。")]),s._v(" "),e("ul",[e("li",[s._v("docs: 放置各插件与主题的文档，每个子文件夹为一个项目")]),s._v(" "),e("li",[s._v("demo: 主题演示项目")]),s._v(" "),e("li",[s._v("packages: 放置各插件与主题的代码，每个子文件夹为一个项目")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v(".\n├── .github → Github 配置\n├── .husky → husky 配置\n│\n├── demo → 主题演示项目\n│\n├── docs → 文档目录\n│ ├── active-hash → active-hash 文档\n│ ├── add-this → add-this 文档\n│ ├── comment → comment 文档\n│ ├── components → components 文档\n│ ├── copy-code → copy-code 文档\n│ ├── feed → feed 文档\n│ ├── git → git 文档\n│ ├── md-enhance → md-enhance 文档\n│ ├── photo-swipe → photo-swipe 文档\n│ ├── pwa → pwa 文档\n│ ├── reading-time → reading-time 文档\n│ ├── seo → seo 文档\n│ ├── sitemap → sitemap 文档\n│ └── theme → 主题文档\n│\n├── packages → 项目源代码\n│ ├── active-hash → active-hash 插件\n│ ├── add-this → add-this 插件\n│ ├── comment → comment 插件\n│ ├── components → components 插件\n│ ├── copy-code → copy-code 插件\n│ ├── create → create-vuepress-theme-hope 助手\n│ ├── feed → feed 插件\n│ ├── git → git 插件\n│ ├── md-enhance → md-enhance 插件\n│ ├── photo-swipe → photo-swipe 插件\n│ ├── pwa → pwa 插件\n│ ├── reading-time → reading-time 插件\n│ ├── seo → seo 插件\n│ ├── shared → 共享文件\n│ ├── smooth-scroll → smooth-scroll 插件\n│ ├── sitemap → sitemap 插件\n│ ├── theme → vuepress-theme-hope 主题\n│ ├── theme-types → 主题的类型定义\n│ └── vuepress-typings → vuepress 类型定义\n│\n├── scripts → 命令脚本\n│\n├── ... → 一些配置文件\n│\n├── LICENSE → 协议\n├── package.json → 项目根 package.json\n├── readme.md → 项目介绍\n├── SECURITY.md → 安全政策文件\n│\n├── tsconfig.* → TypeScript 配置文件\n│\n└── yarn.lock → yarn 版本 lock 文件\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br"),e("span",{staticClass:"line-number"},[s._v("26")]),e("br"),e("span",{staticClass:"line-number"},[s._v("27")]),e("br"),e("span",{staticClass:"line-number"},[s._v("28")]),e("br"),e("span",{staticClass:"line-number"},[s._v("29")]),e("br"),e("span",{staticClass:"line-number"},[s._v("30")]),e("br"),e("span",{staticClass:"line-number"},[s._v("31")]),e("br"),e("span",{staticClass:"line-number"},[s._v("32")]),e("br"),e("span",{staticClass:"line-number"},[s._v("33")]),e("br"),e("span",{staticClass:"line-number"},[s._v("34")]),e("br"),e("span",{staticClass:"line-number"},[s._v("35")]),e("br"),e("span",{staticClass:"line-number"},[s._v("36")]),e("br"),e("span",{staticClass:"line-number"},[s._v("37")]),e("br"),e("span",{staticClass:"line-number"},[s._v("38")]),e("br"),e("span",{staticClass:"line-number"},[s._v("39")]),e("br"),e("span",{staticClass:"line-number"},[s._v("40")]),e("br"),e("span",{staticClass:"line-number"},[s._v("41")]),e("br"),e("span",{staticClass:"line-number"},[s._v("42")]),e("br"),e("span",{staticClass:"line-number"},[s._v("43")]),e("br"),e("span",{staticClass:"line-number"},[s._v("44")]),e("br"),e("span",{staticClass:"line-number"},[s._v("45")]),e("br"),e("span",{staticClass:"line-number"},[s._v("46")]),e("br"),e("span",{staticClass:"line-number"},[s._v("47")]),e("br"),e("span",{staticClass:"line-number"},[s._v("48")]),e("br"),e("span",{staticClass:"line-number"},[s._v("49")]),e("br"),e("span",{staticClass:"line-number"},[s._v("50")]),e("br"),e("span",{staticClass:"line-number"},[s._v("51")]),e("br"),e("span",{staticClass:"line-number"},[s._v("52")]),e("br"),e("span",{staticClass:"line-number"},[s._v("53")]),e("br"),e("span",{staticClass:"line-number"},[s._v("54")]),e("br"),e("span",{staticClass:"line-number"},[s._v("55")]),e("br")])]),e("h2",{attrs:{id:"文档修改"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#文档修改"}},[s._v("#")]),s._v(" 文档修改")]),s._v(" "),e("p",[s._v("你可以直接在 docs 文件夹内找到对应项目，并修改对应的 Markdown。")]),s._v(" "),e("p",[s._v("确保 "),e("code",[s._v("yarn run lint")]),s._v(" 与 "),e("code",[s._v("yarn run lint:md")]),s._v(" 命令没有错误后，即可提交到 GitHub 发起 PR。")]),s._v(" "),e("p",[s._v("如果你想要本地预览项目，由于文档使用本地的主题与插件，你需要通过 "),e("code",[s._v("yarn run build")]),s._v(" 构建本地项目，才能通过根目录下的对应命令 "),e("code",[s._v("yarn run docs/<项目简写>:serve")]),s._v(" 启动开发服务器。")]),s._v(" "),e("h2",{attrs:{id:"项目修改"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#项目修改"}},[s._v("#")]),s._v(" 项目修改")]),s._v(" "),e("p",[s._v("每个项目的结构都大致如下:")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v(".\n├── lib → 编译后的输出文件\n│ │\n│ ├── client → 客户端侧代码\n│ │\n│ ├── node → Node.js 侧代码\n│ │\n│ └── types → 需要导出的类型定义\n│\n└── src → 源文件\n  │\n  ├── client → 客户端侧代码\n  │\n  ├── node → Node.js 侧代码\n  │\n  └── types → 需要导出的类型定义\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br")])]),e("p",[s._v("由于 VuePress1 要求客户端以 "),e("code",[s._v("module.exports")]),s._v(" 的形式导出插件 API，所以我们无法在插件入口文件导出其他类型。类型定义指向 "),e("code",[s._v("lib/types")]),s._v("。")]),s._v(" "),e("p",[s._v("另外由于客户端一侧使用 ES Module (import/export)，而 Node.js 端一侧使用 commonjs (require/exports)，不能交叉引用 node 和 client 文件夹内的代码。")]),s._v(" "),e("ul",[e("li",[e("code",[s._v("client")]),s._v(" 文件夹存放客户端代码，使用 esm 格式编译")]),s._v(" "),e("li",[e("code",[s._v("node")]),s._v(" 文件夹存放 Node.js 端代码，使用 cjs 格式编译")]),s._v(" "),e("li",[e("code",[s._v("types")]),s._v(" 文件夹只能存放 TypeScript 类型。它可以被 client 和 node 文件夹引用，并最终作为类型定义导出提供给其他 package 使用。")])]),s._v(" "),e("h2",{attrs:{id:"项目的运行与开发"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#项目的运行与开发"}},[s._v("#")]),s._v(" 项目的运行与开发")]),s._v(" "),e("h3",{attrs:{id:"构建方式"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#构建方式"}},[s._v("#")]),s._v(" 构建方式")]),s._v(" "),e("ul",[e("li",[s._v("使用 TypeScript 提供的构建与监听命令编译 ts 文件，并将编译得到的 js 文件输出到输出目录。")]),s._v(" "),e("li",[s._v("使用 "),e("code",[s._v("cpx")]),s._v(" package 提供的复制与文件监听命令，将其他格式的文件从源文件拷贝到输出目录。")])]),s._v(" "),e("h3",{attrs:{id:"命令"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#命令"}},[s._v("#")]),s._v(" 命令")]),s._v(" "),e("ol",[e("li",[e("p",[s._v("构建项目: "),e("code",[s._v("yarn run build")])]),s._v(" "),e("p",[s._v("它会执行 "),e("code",[s._v("yarn run build:copy")]),s._v(" 和 "),e("code",[s._v("yarn run build:ts")]),s._v(" 两个命令，对应前文的两种构建步骤。")])]),s._v(" "),e("li",[e("p",[s._v("开发项目: "),e("code",[s._v("yarn run dev")])]),s._v(" "),e("p",[s._v("它会执行 "),e("code",[s._v("yarn run dev:copy")]),s._v(" 和 "),e("code",[s._v("yarn run dev:ts")]),s._v(" 两个命令，执行并监听前文的两种构建步骤。")])]),s._v(" "),e("li",[e("p",[s._v("格式化项目: "),e("code",[s._v("yarn run lint")])]),s._v(" "),e("p",[s._v("它会执行 "),e("code",[s._v("yarn run lint:eslint")]),s._v(" 和 "),e("code",[s._v("yarn run lint:prettier")]),s._v(" 两个命令。")]),s._v(" "),e("p",[s._v("如果你修改了 Markdown，你还需要运行 "),e("code",[s._v("yarn run lint:md")]),s._v(" 命令。")])])]),s._v(" "),e("h2",{attrs:{id:"提交"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#提交"}},[s._v("#")]),s._v(" 提交")]),s._v(" "),e("p",[s._v("项目使用 "),e("code",[s._v("husky")]),s._v(" 与 "),e("code",[s._v("lint-staged")]),s._v(" 添加了额外的 Git Hooks 进行验证:")]),s._v(" "),e("ul",[e("li",[e("p",[s._v("在 "),e("code",[s._v("precommit")]),s._v(" 阶段使用 "),e("code",[s._v("lint-staged")]),s._v(" 配合对应 Linter 对改动的代码进行检验")]),s._v(" "),e("p",[s._v("这意味着你需要保证你的代码按照项目要求进行格式化，可以通过 Linter。")])]),s._v(" "),e("li",[e("p",[s._v("在 "),e("code",[s._v("commit-msg")]),s._v(" 阶段使用 "),e("code",[s._v("commitlint")]),s._v(" 对提交备注进行校验。")]),s._v(" "),e("p",[s._v("这意味着你需要保证你的提交注释符合语义化提交 (Semantic)")])])]),s._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[s._v("提示")]),s._v(" "),e("p",[s._v("如果你不能通过上述 Git Hooks，你将无法完成 "),e("code",[s._v("git commit")]),s._v("。")]),s._v(" "),e("p",[s._v("如果你已经进行贡献，但无法完成提交且不会修复，你可以在提交时添加 "),e("code",[s._v("--no-verify")]),s._v(" Flag 绕过 Git Hooks。")])])])}),[],!1,null,null,null);n.default=t.exports}}]);